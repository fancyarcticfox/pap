var be=Object.defineProperty,xe=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var ee=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var te=(e,a,n)=>a in e?be(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,P=(e,a)=>{for(var n in a||(a={}))ye.call(a,n)&&te(e,n,a[n]);if(ee)for(var n of ee(a))fe.call(a,n)&&te(e,n,a[n]);return e},F=(e,a)=>xe(e,ve(a));import{u as A,a as N,b as k,l as _,$ as B,f as Se,S as y,H as U,t as T,h as $,al as ne,L as ae,E as se,aa as Le,ab as we,ac as Pe,ad as ke,d as M,Z as ce,g as Ce,a0 as Q,k as z,a1 as V,a2 as Y,am as de,an as ue,a5 as Z,a6 as E,a7 as J,C as pe,a3 as Te,a4 as Me}from"./pages.c22eb3e2.js";import{x as W,G as u,v as t,H as q,e as i,P as K}from"./app.2b9af6ff.js";import"./governance.88f90fd8.js";import{g as he,u as D}from"./getNumber.7d417956.js";import{f as H,u as R,T as O}from"./TxBroadcastingModal.26480363.js";import{u as $e}from"./useOverview.27651526.js";import"./index.148ce3f4.js";var S=(e=>(e.ust="ust",e.mine="mine",e))(S||{});const me=()=>{var o;const e=N(),a=k(),n=new _.MineLPPool(e,e.addresses,e.mineUST),s=(o=a==null?void 0:a.terraAddress)!=null?o:"";return A(["@liquidity/overview",{address:s}],async()=>{try{const[r,l,h,m,c]=await Promise.all([n.apy(),s?n.stakedBalance(s):0,s?n.stakedToken(s):0,s?e.mineUST.balanceOf(s):0,s?n.earnings(s):0]);let d=parseFloat(`${h}`);return Number.isNaN(d)&&(d=0),{apy:r,balance:m,earned:c,stakedBalance:l+d}}catch{return}})},qe=e=>{var r;const a=N(),n=k(),s=(r=n==null?void 0:n.terraAddress)!=null?r:"",o=!!e.ust&&!!e.mine&&!!s;return A(["@liquidity/pool/provide",{value:e}],async()=>{try{const[l,h]=await Promise.all([await a.mineUST.provideLiquidity(s,e[S.mine],e[S.ust]),await H()]),m=Math.round(B()*h),c=new W.exports.Coin("uusd",m);return F(P({},l),{transactionFee:c})}catch{return}},{enabled:o,cacheTime:0})},Ee=e=>{var r;const a=N(),n=k(),s=(r=n==null?void 0:n.terraAddress)!=null?r:"";return A(["@liquidity/pool/withdraw",{amount:e}],async()=>{try{const[l,h]=await Promise.all([await a.mineUST.removeLiquidity(s,e),await H()]),m=Math.round(B()*h),c=new W.exports.Coin("uusd",m);return F(P({},l),{transactionFee:c})}catch{return}},{enabled:!!e&&!!s,cacheTime:0})},Fe=e=>{var l;const a=N(),n=k(),s=new _.MineLPPool(a,a.addresses,a.mineUST),o=(l=n==null?void 0:n.terraAddress)!=null?l:"";return A(["@liquidity/staking/stake",{amount:e}],async()=>{try{const[h,m]=await Promise.all([await s.stake(o,e),await H()]),c=Math.round(B()*m),d=new W.exports.Coin("uusd",c);return F(P({},h),{transactionFee:d})}catch{return}},{enabled:!!e&&!!o,cacheTime:0})},Ae=e=>{var l;const a=N(),n=k(),s=new _.MineLPPool(a,a.addresses,a.mineUST),o=(l=n==null?void 0:n.terraAddress)!=null?l:"";return A(["@liquidity/staking/unstake",{amount:e}],async()=>{try{const[h,m]=await Promise.all([await s.unstake(o,e),await H()]),c=Math.round(B()*m),d=new W.exports.Coin("uusd",c);return F(P({},h),{transactionFee:d})}catch{return}},{enabled:!!e&&!!o,cacheTime:0})},Ne={name:"oehby9",styles:"display:grid;grid-template-columns:repeat(2, 1fr);grid-template-rows:repeat(2, auto);column-gap:16px;row-gap:32px;margin-right:48px"},I={name:"mmvz9h",styles:"font-weight:400"},Ue={name:"17elh3g",styles:'list-style:none;counter-reset:list;padding-left:1.4em;&>li{position:relative;&:before{position:absolute;left:-1.4em;counter-increment:list;content:counter(list, decimal) ") ";}}'},Ie=()=>{var r;const{isLoading:e,data:{apy:a=0,earned:n=0,stakedBalance:s=0,balance:o=0}={}}=me();return u(q,{children:[t(Se,{small:!0,children:"MINE-UST LP"}),t(y,{level:40}),u("div",{css:Ne,children:[u("div",{children:[t(U,{children:"APR"}),t(y,{level:8}),t($,{css:I,children:`${e?"-":(r=T(a*100,2))==null?void 0:r.toLocaleString()}%`})]}),u("div",{children:[t(U,{children:"Reward"}),t(y,{level:8}),t($,{css:I,children:`${e?"-":n==null?void 0:n.toLocaleString()} MINE`})]}),u("div",{children:[t(U,{children:"Staked"}),t(y,{level:8}),t($,{css:I,children:`${e?"-":s==null?void 0:s.toLocaleString()} LP`})]}),u("div",{children:[t(U,{children:"Available"}),t(y,{level:8}),t($,{css:I,children:`${e?"-":o==null?void 0:o.toLocaleString()} LP`})]})]}),t(y,{level:56}),u(ne,{children:[u("p",{children:[t("b",{children:"Migrate LP to Astroport: "}),"You need to migrate your LP from Terraswap to Astroport in order to receive MINE LP rewards."]}),u("p",{children:["For more information, refer to governance poll #3 ",t(ae,{to:"/gov/poll/3",children:'"Redirect MINE-UST rewards to Astroport"'})]})]}),t(y,{level:12}),u(ne,{children:[t("p",{children:t("b",{children:"Instructions on how to migrate your LP tokens from TerraSwap to Astroport:"})}),u("ol",{css:Ue,children:[t("li",{children:t(ae,{to:"/liquidity/staking/unstake",children:"Unstake LP tokens from the Pylon WebApp"})}),t("li",{children:t(se,{to:"https://app.terraswap.io/swap#Withdraw",children:"Withdraw LP token back to MINE-UST on TerraSwap"})}),t("li",{children:t(se,{to:"https://app.astroport.fi/pools/terra134m8n2epp0n40qr08qsvvrzycn2zq4zcpmue48",children:"Head over to Astroport Pools to add liquidity to MINE-UST and stake the LP tokens"})})]})]}),t(y,{level:56})]})},j=({data:e})=>e?t(ke,{children:t("tbody",{children:[{name:"Tax",key:"tax"},{name:"Transaction Fee",key:"transactionFee"}].map(({name:n,key:s})=>{const o=e[s];if(!o)return null;const r=Le(o.toData().amount);return u("tr",{children:[t(we,{children:n}),t(Pe,{children:`${T(r,3).toLocaleString()} UST`})]},s)})})}):null;function Be(e){return i.exports.createElement("svg",P({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),i.exports.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.75 12H5.25M12 5.25v13.5-13.5z",opacity:.25}))}const ge=e=>e===S.mine?S.ust:S.mine,G=e=>(a,n)=>{const s=ge(e);return{[e]:a,[s]:e===S.mine?T(a*n,3):T(a*(1/n),3)}},ze={name:"qn8x3u",styles:"display:flex;>div{width:calc(50% - 28px);}@media all and (max-width: 640px){display:block;>div{width:100%;}}"},Ve={name:"1ab9xpu",styles:"margin:12px 16px;flex-shrink:0;html[color-scheme='dark'] &{path{stroke:white;}}@media all and (max-width: 640px){display:block;margin:8px auto 16px;}"},We=M("div",{target:"e1ltvmu02"})({name:"2qga7i",styles:"text-align:right"}),De=M("button",{target:"e1ltvmu01"})("display:inline-block;padding-bottom:2px;font-size:14px;line-height:14px;border-bottom:1px solid rgba(0, 0, 0, 0.33);color:rgba(0, 0, 0, 0.5);cursor:",e=>e.disabled?"not-allowed":"pointer",";html[color-scheme='dark'] &{color:rgba(255, 255, 255, 0.5);border-color:rgba(255, 255, 255, 0.33);}"),He=M("p",{target:"e1ltvmu00"})({name:"1ylnt42",styles:"padding:0 4px;margin-top:8px;font-size:14px;line-height:14px;color:#ff0f49"}),Re=({priceInUst:e,mineBalance:a,ustBalance:n,onSync:s})=>{const o=k(),[r,l]=i.exports.useState(""),[h,m]=i.exports.useState({[S.mine]:0,[S.ust]:0}),c=i.exports.useMemo(()=>({mine:T(a,3),ust:Math.max(T(n,3)-1,0)}),[a,n]),d=i.exports.useCallback(p=>()=>{m(f=>{const b=ge(p);let x=G(p)(c[p],e);return x[b]>c[b]&&(x=G(b)(c[b],e)),P(P({},f),x)}),l("")},[c,e]),v=i.exports.useCallback(p=>f=>{const b=he(f.target.value),x=G(p)(b.data,e);if(m(L=>P(P({},L),x)),b.type!=="success"){l(b.message);return}if(b.data>c[p]){l(`Exceed available ${p.toUpperCase()}.`);return}l("")},[c,e]),g=i.exports.useCallback(p=>()=>{m(f=>(f[p]>c[p]&&d(p)(),f))},[c,d]);i.exports.useEffect(()=>{l(""),m({[S.mine]:0,[S.ust]:0})},[o,c]),i.exports.useEffect(()=>{s(h)},[h,s]);const w=p=>{const f=p.toUpperCase(),b=c[p],x=!o||!b||!e;return u("div",{children:[t(ce,{type:"number",label:f,placeholder:"0.00",disabled:x,value:h[p]||"",onBlur:g(p),onChange:v(p)}),t(y,{level:4}),t(We,{children:t(De,{type:"button",disabled:x,onClick:d(p),children:`${b.toLocaleString()} ${f} Available`})})]})};return u(q,{children:[u("div",{css:ze,children:[w(S.mine),t(Be,{css:Ve}),w(S.ust)]}),r&&t(He,{children:r})]})},Oe=M("div",{target:"e1bemrd51"})({name:"2qga7i",styles:"text-align:right"}),je=M(Ce.withComponent("button",{target:"e1bemrd52"}),{target:"e1bemrd50"})("display:inline-block;padding-bottom:2px;border-bottom:1px solid rgba(0, 0, 0, 0.33);color:rgba(0, 0, 0, 0.5);cursor:",e=>e.disabled?"not-allowed":"pointer",";html[color-scheme='dark'] &{color:rgba(255, 255, 255, 0.5);border-color:rgba(255, 255, 255, 0.33);}"),X=({maximumBalance:e,onSync:a})=>{const n=k(),[s,o]=i.exports.useState(""),[r,l]=i.exports.useState(0),h=i.exports.useCallback(v=>{const g=he(v.target.value);if(g.type!=="success"){l(g.data),o(g.message);return}if(g.data>e){l(g.data),o("Exceed available LP.");return}l(g.data),o("")},[e]),m=i.exports.useCallback(()=>{l(v=>{const g=Math.min(v,e);return g===e&&o(""),g})},[e]),c=i.exports.useCallback(()=>{l(e),o("")},[e]);i.exports.useEffect(()=>{l(0),o("")},[n,e]),i.exports.useEffect(()=>{a(r)},[r,a]);const d=!n||!e;return u(q,{children:[t(ce,{type:"number",label:"LP",placeholder:"0.00",disabled:d,error:s,value:r||"",onBlur:m,onChange:h}),t(y,{level:8}),t(Oe,{children:t(je,{type:"button",disabled:d,onClick:c,children:`${e.toLocaleString()} LP Available`})})]})},oe={[S.mine]:0,[S.ust]:0},Ge=()=>{const[e,a]=i.exports.useState(void 0),[n,s]=i.exports.useState(oe),{mine:o,ust:r}=K(Q),{isFetching:l,data:{priceInUst:h=0}={}}=$e(),m=D(n,300),{isFetching:c,isFetched:d,data:v}=qe(m),{isTransacting:g,send:w}=R(),p=i.exports.useCallback(()=>{a(void 0),s(oe)},[]),f=i.exports.useCallback(x=>{s(x)},[]),b=async()=>{if(v){const L={action:`Provide ${n[S.mine].toLocaleString()} MINE + ${n[S.ust].toLocaleString()} UST`},C=await w(v.transactions,L);if(!(C!=null&&C.payload))return;a(C.payload)}};return l||c||g||Object.values(n).some(x=>!x),u(q,{children:[t($,{children:"Input"}),t(y,{level:16}),t(Re,{priceInUst:h,mineBalance:o,ustBalance:r,onSync:f}),t(y,{level:40}),d&&t(j,{data:v}),t(V,{intent:"primary",size:"large",disabled:!0,onClick:b,children:g?t(z,{color:"#000000"}):"Add Liquidity"}),!!e&&t(O,{isTransacting:g,type:e!=null&&e.success?"success":"failure",details:e,onClose:p})]})},_e=()=>{const e=k(),{mineUstLP:a}=K(Q),[n,s]=i.exports.useState(0),[o,r]=i.exports.useState(void 0),l=D(n,300),h=i.exports.useMemo(()=>T(a,3),[a]),{isFetching:m,isFetched:c,data:d}=Ee(l),{isTransacting:v,send:g}=R(),w=i.exports.useCallback(()=>{r(void 0),s(0)},[]),p=i.exports.useCallback(b=>{s(b)},[]),f=async()=>{if(d){const x={action:`Withdraw ${n.toLocaleString()} LP`},L=await g(d.transactions,x);if(!(L!=null&&L.payload))return;r(L.payload)}};return i.exports.useEffect(()=>{s(0)},[e]),u(q,{children:[t($,{children:"Input"}),t(y,{level:16}),t(X,{maximumBalance:h,onSync:p}),t(y,{level:40}),c&&t(j,{data:d}),u(V,{intent:"secondary",size:"large",disabled:!0,onClick:f,children:[v?t(z,{}):"Remove Liquidity",!!o&&t(O,{isTransacting:v,type:o!=null&&o.success?"success":"failure",details:o,onClose:w})]})]})},Qe=()=>{const e=k(),{mineUstLP:a}=K(Q),[n,s]=i.exports.useState(0),[o,r]=i.exports.useState(void 0),l=D(n,300),h=i.exports.useMemo(()=>T(a,3),[a]),{isFetching:m,isFetched:c,data:d}=Fe(l),{isTransacting:v,send:g}=R(),w=i.exports.useCallback(()=>{r(void 0),s(0)},[]),p=i.exports.useCallback(b=>{s(b)},[]),f=async()=>{if(d){const x={action:`Stake ${n.toLocaleString()} LP`},L=await g(d.transactions,x);if(!(L!=null&&L.payload))return;r(L.payload)}};return i.exports.useEffect(()=>{s(0)},[e]),u(q,{children:[t($,{children:"Depositing"}),t(y,{level:16}),t(X,{maximumBalance:h,onSync:p}),t(y,{level:40}),c&&t(j,{data:d}),t(V,{intent:"primary",size:"large",disabled:!0,onClick:f,children:v?t(z,{}):"Stake MINE-UST LP"}),!!o&&t(O,{isTransacting:v,type:o!=null&&o.success?"success":"failure",details:o,onClose:w})]})},Ye=()=>{const e=k(),{data:{stakedBalance:a=0}={}}=me(),[n,s]=i.exports.useState(0),[o,r]=i.exports.useState(void 0),l=D(n,300),h=i.exports.useMemo(()=>T(a,3),[a]),{isFetching:m,isFetched:c,data:d}=Ae(l),{isTransacting:v,send:g}=R(),w=i.exports.useCallback(()=>{r(void 0),s(0)},[]),p=i.exports.useCallback(x=>{s(x)},[]),f=async()=>{if(d){const L={action:`Unstake ${n.toLocaleString()} LP`},C=await g(d.transactions,L);if(!(C!=null&&C.payload))return;r(C.payload)}};return i.exports.useEffect(()=>{s(0)},[e]),u(q,{children:[t($,{children:"Withdrawing"}),t(y,{level:16}),t(X,{maximumBalance:h,onSync:p}),t(y,{level:40}),c&&t(j,{data:d}),t(V,{intent:"secondary",size:"large",disabled:!n||!a||!d||m||v,onClick:f,children:v?t(z,{}):"Unstake MINE-UST LP"}),!!o&&t(O,{isTransacting:v,type:o!=null&&o.success?"success":"failure",details:o,onClose:w})]})},ie=[{tab:"provide",name:"Provide",component:Ge},{tab:"withdraw",name:"Withdraw",component:_e}],Ze=()=>u(pe,{children:[t(ue,{children:ie.map(({tab:e,name:a})=>t(Y,{className:({isActive:n})=>n?"on":void 0,to:`${e}`,children:t(de,{children:a})},e))}),u(Z,{children:[ie.map(({tab:e,component:a})=>t(E,{element:t(a,{}),path:`${e}`},e)),t(E,{path:"*",element:t(J,{to:"provide"})})]})]}),re=[{tab:"stake",name:"Stake",component:Qe},{tab:"unstake",name:"Unstake",component:Ye}],Je=()=>u(pe,{children:[t(ue,{children:re.map(({tab:e,name:a})=>t(Y,{className:({isActive:n})=>n?"on":void 0,to:`${e}`,children:t(de,{children:a})},e))}),u(Z,{children:[re.map(({tab:e,component:a})=>t(E,{element:t(a,{}),path:`${e}`},e)),t(E,{path:"*",element:t(J,{to:"stake"})})]})]}),Ke=M("div",{target:"e1retnq53"})({name:"mb6hab",styles:"display:grid;grid-template-columns:[left] 360px [main];gap:48px;margin:0 auto;@media all and (max-width: 960px){display:block;}"}),Xe=M("div",{target:"e1retnq52"})({name:"1cgc7zm",styles:"grid-column:left/main"}),et=M("div",{target:"e1retnq51"})({name:"1lg8d8o",styles:"grid-column:main/end"}),tt=M("section",{target:"e1retnq50"})({name:"6mg1so",styles:"max-width:512px"}),le=[{tab:"pool",name:"Pool",component:Ze},{tab:"staking",name:"Staking",component:Je}],nt=()=>u(Ke,{children:[t(Xe,{children:t(Ie,{})}),u(et,{children:[t(Me,{children:le.map(({tab:e,name:a})=>t(Y,{className:({isActive:n})=>n?"on":void 0,to:`${e}`,children:t(Te,{children:a})},e))}),t(tt,{children:u(Z,{children:[le.map(({tab:e,component:a})=>t(E,{element:t(a,{}),path:`${e}/*`},e)),t(E,{path:"*",element:t(J,{to:"pool"})})]})})]})]});var ut=nt;export{ut as default};
