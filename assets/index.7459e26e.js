import{u as O,e as g,G as c,v as e,H as y,V as k,R as W}from"./app.2b9af6ff.js";import{u as f,o as E,n as D,l as N,t as v,a as z,b as C,d as m,H as Q,S as i,k as I,P as Y,h as x,g as H,C as G,e as _,a1 as K,f as V,a6 as F,a7 as J,aw as X,a5 as Z}from"./pages.c22eb3e2.js";import{u as ee,T as te}from"./TxBroadcastingModal.26480363.js";import{u as ne,c as re}from"./client.2baf8635.js";import{T as ae}from"./Tooltip.94e8fff6.js";import{T as se}from"./TxHistory.85693950.js";import"./index.148ce3f4.js";const M="https://assets.terra.money",oe=async t=>{try{return(await Promise.all([D.get(`${M}/cw20/tokens.json`),D.get(`${M}/cw20/contracts.json`)])).reduce((r,{data:s})=>{var o;return Object.assign(r,(o=s[t])!=null?o:{})},{})}catch{return{}}},U=()=>{const n=E().config.chainID.startsWith("columbus-")?"mainnet":"testnet";return f(["@global/terra-assets",n],()=>oe(n),{suspense:!0,refetchOnWindowFocus:!1,cacheTime:1/0})},ce=(t,n)=>{const a=z();return f(["@mypage/token-info",t],async()=>{try{if(!t)return;const s=await N.TerraswapUSTPair.fetch(a.lcd,n),o=await(s==null?void 0:s.tokenPrice());return v(o!=null?o:0,3)}catch{return}},{refetchOnWindowFocus:!1,enabled:!!t&&!!n})},ie=()=>{var d;const t=z(),{send:n}=ee(),a=O(),r=C(),s=(d=r==null?void 0:r.terraAddress)!=null?d:"",o=g.exports.useCallback(p=>{p.code||(a.invalidateQueries(T.pk(s)),a.removeQueries())},[s,a]);return ne(async()=>{const p=await t.governance.claimAirdrops(s),h={action:"Claim Pylon Governance Airdrops",callback:o};return await n(p.transactions,h)})},le=async t=>{var r;const{status:n,data:a}=await re().get(`api/governance/v1/airdrop/${t}/logs`);return{status:n,data:(r=a==null?void 0:a.logs)!=null?r:[]}},q=t=>["@mypage/airdrop-claim-logs",t],T=()=>{var r;const t=C(),n=(r=t==null?void 0:t.terraAddress)!=null?r:"",a=!!n;return f(q(n),async()=>{try{const{data:s}=await le(n);return s}catch{return}},{enabled:a,refetchOnWindowFocus:!1})};T.pk=q;const de=m("div",{target:"e1haqqwk0"})({name:"vc30oj",styles:"display:block;width:100%;height:1px;background:rgba(0, 0, 0, 0.12);html[color-scheme='dark'] &{background:rgba(255, 255, 255, 0.24);}"}),me=()=>{var r;const{isFetching:t,data:n}=T(),a=(r=n==null?void 0:n.slice(0,10))!=null?r:[];return c(y,{children:[e(Q,{children:"History"}),e(i,{level:16}),e(de,{}),e(i,{level:16}),t?e(I,{}):e("div",{children:a.map(({tokenSymbol:s,at:o,amount:l,block:d})=>e(se,{title:`Claimed ${l.toLocaleString()} ${s}`,at:o,children:`#${d}`},o))})]})},pe={name:"vxuddk",styles:"padding:24px"},ue={name:"1ocfp9v",styles:"margin-right:4px;line-height:1"},he={name:"s079uh",styles:"margin-top:2px"},w={name:"1fgq7lv",styles:"color:rgba(0, 0, 0, 0.5);html[color-scheme='dark'] &{color:rgba(255, 255, 255, 0.5);}"},B={name:"1k1eese",styles:"color:rgba(0, 0, 0, 0.33);html[color-scheme='dark'] &{color:rgba(255, 255, 255, 0.33);}"},ge=m("div",{target:"e1vs2o493"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),ye=m("img",{target:"e1vs2o492"})({name:"yxejn",styles:"height:24px;margin-right:8px"}),ve=m("div",{target:"e1vs2o491"})({name:"tcz8vh",styles:"display:block;width:100%;height:1px;background:rgba(0, 0, 0, 0.07);html[color-scheme='dark'] &{background:rgba(255, 255, 255, 0.1);}"}),R=m("div",{target:"e1vs2o490"})({name:"1j9b4cq",styles:"display:grid;grid-template-columns:1fr auto;font-size:13px;line-height:1"}),j="YYYY MMM DD",be=({symbol:t,startDate:n,endDate:a,dailyRewards:r})=>{const[,s]=g.exports.useState(0);g.exports.useEffect(()=>{const d=window.setInterval(()=>{s(p=>p+1)},3e4);return()=>{window.clearInterval(d)}},[]);const o=a.diff(n,"second"),l=k.utc().diff(n,"second")/o;return c(y,{children:[e(R,{children:c("div",{children:[e("span",{css:B,children:"Daily Rewards"}),e(i,{as:"span",level:4,horizontal:!0}),e("span",{css:w,children:`${v(r,3).toLocaleString()} ${t}`})]})}),e(i,{level:8}),e(Y,{percent:l}),e(i,{level:8}),c(R,{css:w,children:[e("span",{children:`Launched at ${n.format(j)}`}),e("span",{children:`Distributed until ${a.format(j)}`})]})]})},ke=({asset:t,address:n,amount:a,info:r})=>{var h,b,$,S,A,P,L;const{isFetching:s,data:o=0}=ce((h=t==null?void 0:t.symbol)!=null?h:"",n),l=($=(b=t==null?void 0:t.symbol)!=null?b:t==null?void 0:t.protocol)!=null?$:"",d=((S=r==null?void 0:r.rewardRatePerSec)!=null?S:0)*60*60*24,p=k.utc(r==null?void 0:r.startsAt),u=k.utc(r==null?void 0:r.endsAt);return c(G,{css:pe,children:[c(ge,{children:[(t==null?void 0:t.icon)&&e(ye,{alt:t==null?void 0:t.name,src:t==null?void 0:t.icon}),e(x,{css:ue,small:!0,children:s?"Loading...":(P=(A=t==null?void 0:t.name)!=null?A:t==null?void 0:t.protocol)!=null?P:"Unknown token"}),s&&c(ae,{css:he,children:[e("p",{children:"Allocation is given to $MINE stakers, with a one-year Airdrop period based on the official launch time."}),e("p",{children:`Tokens are accumulated every second with amount of ${((L=r==null?void 0:r.rewardRatePerSec)!=null?L:0).toLocaleString()} / sec, based on the price estimate of 1 ${`${l} = ${o}`} UST.`})]})]}),e(i,{level:16}),e(H,{css:w,children:"Unclaimed Airdrop"}),e(i,{level:4}),c("div",{children:[e(x,{as:"span",weight:400,children:`${v(a,3).toLocaleString()} ${l}`}),e(i,{as:"span",level:4,horizontal:!0}),e(H,{as:"span",css:B,children:`$${v(a*o,3)} UST`})]}),!s&&!!r&&c(y,{children:[e(i,{level:16}),e(ve,{}),e(i,{level:16}),e(be,{symbol:l,startDate:p,endDate:u,dailyRewards:d})]})]})},xe=()=>{var o,l;const{data:t={}}=U(),{data:n}=_(),a=ie(),r=g.exports.useCallback(()=>{a.mutate()},[a]),s=a.isLoading;return c(y,{children:[c("div",{children:[!(n!=null&&n.length)&&e(x,{children:"There is no claimable airdrops."}),n==null?void 0:n.map(({airdropId:d,info:p,tokenAddress:u,amount:h})=>c(g.exports.Fragment,{children:[e(ke,{id:d,asset:t[u],address:u,amount:h,info:p}),e(i,{level:16})]},u))]}),e(i,{level:8}),!!(n!=null&&n.length)&&e(K,{intent:"primary",size:"large",disabled:s,onClick:r,children:a.isLoading?e(I,{color:"#000000"}):"Claim All"}),e(i,{level:56}),a.data&&e(te,{isTransacting:a.isLoading,type:(o=a.data)!=null&&o.failed?"failure":"success",details:(l=a.data)==null?void 0:l.payload,onClose:a.reset})]})},we=m("div",{target:"e1en4ypd3"})({name:"mb6hab",styles:"display:grid;grid-template-columns:[left] 360px [main];gap:48px;margin:0 auto;@media all and (max-width: 960px){display:block;}"}),fe=m("div",{target:"e1en4ypd2"})({name:"1cgc7zm",styles:"grid-column:left/main"}),Ce=m("div",{target:"e1en4ypd1"})({name:"1lg8d8o",styles:"grid-column:main/end"}),Te=m("section",{target:"e1en4ypd0"})({name:"6mg1so",styles:"max-width:512px"}),$e=()=>(U(),c(we,{children:[c(fe,{children:[e(V,{children:"Airdrops"}),e(i,{level:40}),e(me,{})]}),e(Ce,{children:e(Te,{children:e(xe,{})})})]})),Se=m("div",{target:"el3p00p0"})({name:"12byf7z",styles:"display:block;margin:0 auto"}),Ae=()=>{const t=C();return e(Se,{children:e(W.Suspense,{fallback:e(y,{}),children:c(Z,{children:[t?e(F,{path:"airdrop",element:e($e,{})}):null,e(F,{path:"*",element:t?e(J,{to:"airdrop"}):e(X,{})})]})})})};var je=Ae;export{je as default};
